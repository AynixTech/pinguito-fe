<div class="generic-form">
    <h2 class="title">Crea una nuova Campagna</h2>

    <form [formGroup]="campaignForm" (ngSubmit)="onSubmit()" class="form-grid">



        <div class="form-group col-100">
            <label for="companyName">Azienda (Nome)</label>
            <input type="text" id="companyName" formControlName="companyName" placeholder="Company Name" />
        </div>

        <div class="form-group col-100">
            <label for="companyUuid">Azienda (UUID)</label>
            <input type="text" id="companyUuid" formControlName="companyUuid"
                placeholder="es. 123e4567-e89b-12d3-a456-426614174000" />
        </div>

        <div class="form-group col-50">
            <label for="name">Nome</label>
            <input type="text" id="name" formControlName="name" placeholder="Campagna Inverno 2025" />
        </div>

        <div class="form-group col-50">
            <label for="budget">Budget (â‚¬)</label>
            <input type="number" id="budget" formControlName="budget" placeholder="1000" />
        </div>

        <div class="form-group col-100">
            <label for="description">Descrizione</label>
            <textarea id="description" formControlName="description"
                placeholder="Campagna inverno con focus su email marketing"></textarea>
        </div>

        <div class="form-group col-50">
            <label for="startDate">Data Inizio</label>
            <input type="datetime-local" id="startDate" formControlName="startDate" />
        </div>

        <div class="form-group col-50">
            <label for="endDate">Data Fine</label>
            <input type="datetime-local" id="endDate" formControlName="endDate" />
        </div>

        <div class="form-group col-100">
            <label for="status">Stato</label>
            <select id="status" formControlName="status">
                <option value="planned">Pianificata</option>
                <option value="active">Attiva</option>
                <option value="inactive">Inattiva</option>
                <option value="completed">Completata</option>
                <option value="cancelled">Cancellata</option>
            </select>
        </div>

        <div class="form-group col-100">
            <label>Canali</label>
            <div class="checkbox-group">
                <label><input type="checkbox" [value]="'email'" (change)="onChannelChange($event)"
                        [checked]="channels.includes('email')" /> Email</label>
                <label><input type="checkbox" [value]="'facebook'" (change)="onChannelChange($event)"
                        [checked]="channels.includes('facebook')" /> Facebook</label>
                <label><input type="checkbox" [value]="'instagram'" (change)="onChannelChange($event)"
                        [checked]="channels.includes('instagram')" /> Instagram</label>
                <label><input type="checkbox" [value]="'tiktok'" (change)="onChannelChange($event)"
                        [checked]="channels.includes('tiktok')" /> TikTok</label>
            </div>
        </div>



        <!-- Campo prompt AI -->
        <div class="form-group col-100">
            <label for="aiContentPrompt">Prompt Contenuto AI</label>
            <textarea id="aiContentPrompt" formControlName="aiContentPrompt"
                placeholder="es. 'Scrivi un testo promozionale per una campagna invernale di email marketing rivolto a clienti fidelizzati'"></textarea>
        </div>

        <div class="form-group col-100">
            <button type="button" class="btn-generate-ai-content" (click)="generateAIContent()"
                [disabled]="!campaignForm.get('aiContentPrompt')?.value.trim() || channels.length === 0">
                Genera contenuto AI
            </button>
        </div>

        <!-- Campi AI generati -->
        <ng-container *ngIf="channels.includes('facebook')">
            <div class="form-group col-100">
                <label for="aiGeneratedContentFacebook">Contenuto Facebook AI Generato</label>
                <textarea id="aiGeneratedContentFacebook" formControlName="aiGeneratedContentFacebook"
                    [rows]="10"></textarea>
            </div>

            <div class="form-group col-100">
                <label for="aiSummaryFacebook">Sintesi Facebook AI</label>
                <textarea id="aiSummaryFacebook" formControlName="aiSummaryFacebook"></textarea>
            </div>

            <div class="form-group col-100">
                <label for="aiKeywordsFacebook">Parole Chiave Facebook AI (separate da virgola)</label>
                <input id="aiKeywordsFacebook" formControlName="aiKeywordsFacebook"
                    placeholder="inverno, regali, newsletter" />
            </div>
        </ng-container>

        <ng-container *ngIf="channels.includes('instagram')">
            <div class="form-group col-100">
                <label for="aiGeneratedContentInstagram">Contenuto Instagram AI Generato</label>
                <textarea id="aiGeneratedContentInstagram" formControlName="aiGeneratedContentInstagram"
                    [rows]="10"></textarea>
            </div>
            <div class="form-group col-100">
                <label for="aiSummaryInstagram">Sintesi Instagram AI</label>
                <textarea id="aiSummaryInstagram" formControlName="aiSummaryInstagram"></textarea>
            </div>
            <div class="form-group col-100">
                <label for="aiKeywordsInstagram">Parole Chiave Instagram AI (separate da virgola)</label>
                <input id="aiKeywordsInstagram" formControlName="aiKeywordsInstagram"
                    placeholder="inverno, regali, newsletter" />
            </div>
        </ng-container>
        <ng-container *ngIf="channels.includes('email')">

            <div class="form-group col-100">
                <label for="aiGeneratedContentEmail">Contenuto Email AI Generato</label>
                <textarea id="aiGeneratedContentEmail" formControlName="aiGeneratedContentEmail" [rows]="10"></textarea>
            </div>
            <div class="form-group col-100">
                <label for="aiSummaryEmail">Sintesi Email AI</label>
                <textarea id="aiSummaryEmail" formControlName="aiSummaryEmail"></textarea>
            </div>
            <div class="form-group col-100">
                <label for="aiKeywordsEmail">Parole Chiave Email AI (separate da virgola)</label>
                <input id="aiKeywordsEmail" formControlName="aiKeywordsEmail"
                    placeholder="inverno, regali, newsletter" />
            </div>
        </ng-container>
        <div class="buttons col-100">
            <button class="btn-primary" type="submit" [disabled]="campaignForm.invalid">Salva</button>
        </div>
    </form>
</div>